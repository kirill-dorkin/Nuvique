<script lang="ts">
  import type { CanvasTalkBalloonStoryblok } from '$types/bloks';
  import clsx from 'clsx';

  export let item: CanvasTalkBalloonStoryblok;
</script>

<div
  class="absolute h-[147px] w-[246px]"
  style="left: {item.left || 0}px; top: {item.top || 0}px; transform: rotate({item.rotate || 0}deg)"
>
  <svg
    class={clsx(item.position === 'left' ? 'scale-x-[-1]' : '')}
    width="246"
    height="147"
    viewBox="0 0 246 147"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M241.463 96.7533L244.835 21.9551C245.108 15.8939 240.222 10.8532 234.155 10.9373L12.9288 14.0055C8.8473 14.0621 5.61193 17.4663 5.76282 21.5454L8.77096 102.871C8.91087 106.653 11.9291 109.696 15.7103 109.866L52.0686 111.505C52.7291 111.535 53.2115 112.141 53.0924 112.791L48.9442 135.447C48.769 136.404 49.8398 137.094 50.6392 136.539L83.7207 113.572C84.2869 113.179 84.9531 112.955 85.6418 112.926L231.372 106.813C236.835 106.584 241.217 102.216 241.463 96.7533Z"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M192.858 11.23C200.415 11.5706 207.781 12.6427 215.293 12.9813C218.294 13.1165 221.13 14.3545 224.083 14.4876C226.293 14.5872 228.503 14.6869 230.713 14.7865C231.979 14.8435 241.244 14.5309 241.361 16.0065C241.407 16.5883 241.907 17.6867 242.076 18.3413C242.45 19.788 242.602 21.2243 242.535 22.7204C242.305 27.8187 242.282 32.8835 242.217 37.9605C242.183 40.6026 242.645 43.3627 243.045 45.9746C243.369 48.0922 243.113 50.2216 243.331 52.3606C243.841 57.3562 243.83 63.3107 242.779 68.2481C241.077 76.2424 240.506 84.1137 240.138 92.2648C239.919 97.1249 238.505 101.083 236.146 105.325C235.801 105.945 234.799 108.539 233.868 108.552C232.279 108.574 230.666 108.408 229.08 108.337C223.404 108.081 217.583 108.528 211.902 108.693C209.377 108.766 207.042 109.193 204.482 109.078C201.525 108.945 198.615 108.444 195.68 108.311C192.303 108.159 188.927 108.007 185.55 107.855C182.688 107.726 179.898 108.34 177.046 108.212C174.893 108.114 172.163 107.525 170.06 108.082C168.604 108.467 167.076 107.911 165.603 108.251C161.564 109.182 156.653 107.723 152.538 107.868C147.794 108.034 143.049 109.64 138.218 109.422C134.338 109.247 129.718 109.718 125.921 108.847C121.526 107.84 117.017 108.836 112.623 108.638C111.57 108.591 108.391 108.486 107.441 108.96C106.077 109.641 102.962 110.423 101.473 110.356C98.4386 110.219 94.3513 111.086 91.2943 111.912C88.4238 112.687 85.8842 112.893 83.3547 114.741C81.1842 116.327 78.6918 117.596 76.7057 119.416C75.2636 120.737 73.9969 122.24 72.4636 123.46C69.594 125.743 66.2948 127.422 63.3324 129.524C61.6748 130.701 59.3171 131.768 57.4735 132.591C55.489 133.476 53.4342 134.313 51.4508 135.197C50.5334 135.607 47.2933 137.444 46.7056 135.847C46.0889 134.171 46.7644 130.587 47.3009 129.007C48.0775 126.721 49.0568 124.399 49.7453 122.086C50.4665 119.664 50.3817 117.001 51.1869 114.668C51.4523 113.899 51.4743 112.906 51.8317 112.189C52.8131 110.22 47.5262 111.255 46.2583 111.198C36.2091 110.745 26.0916 110.562 16.0554 109.836C10.4028 109.428 8.97145 103.236 9.18827 98.4253C9.35682 94.6857 9.47957 91.2996 8.64785 87.6693C7.87218 84.2837 7.31401 81.0578 6.88733 77.5985C6.25182 72.4464 6.80421 67.2438 6.10944 62.1034C5.87113 60.3402 5.93375 58.2353 5.91266 56.4615C5.89513 54.9862 5.71771 53.5331 5.74408 52.0133C5.86179 45.2274 5.61942 38.4023 5.92664 31.5863C6.14201 26.8081 6.13369 17.8004 11.6278 15.6431C15.1634 14.2548 19.4074 14.8836 23.1163 15.0508C28.3957 15.2887 33.6751 15.5267 38.9544 15.7646C45.2185 16.047 51.4764 15.2189 57.7686 15.5025C62.1271 15.699 66.4857 15.8954 70.8442 16.0919C75.4267 16.2984 80.0553 15.7669 84.6898 15.9758C86.1894 16.0434 87.658 16.26 89.1059 15.8048C90.2755 15.4372 91.4081 15.1685 92.6588 15.2249C95.4533 15.3508 98.2743 15.6191 100.982 15.2505C101.826 15.1357 105.769 16.0049 105.391 15.2437C104.965 14.3863 106.787 14.5669 107.065 14.9491C108.368 16.7413 110.382 15.3589 112.026 14.9671C113.349 14.6518 111.958 13.7553 111.977 13.3407C111.987 13.1137 119.316 13.1171 120.066 13.1091C125.144 13.0553 130.073 12.8407 135.179 13.0708C139.122 13.2485 143.064 13.4262 147.006 13.6039C150.684 13.7697 154.27 13.1912 157.885 13.3541C163.816 13.6215 170.532 13.2696 176.373 12.1316C180.019 11.4213 183.266 10.7976 186.965 10.9643C191.139 11.1525 195.314 11.3406 199.488 11.5288"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
    />
  </svg>

  <p
    class="absolute left-1/2 top-1/2 w-[246px] -translate-x-1/2 -translate-y-1/2 px-5 pb-14 pt-7 text-center font-comic text-sm font-bold"
  >
    {item.text}
  </p>
</div>
